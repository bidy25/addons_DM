<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal.frontend_layout" name="Main Frontend Layout" inherit_id="web.frontend_layout">
        <xpath expr="//div[@id='wrapwrap']" position="attributes">
            <attribute name="t-attf-class" add="#{request.env['res.lang']._lang_get(request.env.lang).direction == 'rtl' and 'o_rtl' or ''}"
                       separator=" "/>
            <attribute name="t-attf-class" add="#{'o_portal' if is_portal else ''}" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wrapwrap']/header/img" position="replace">
            <nav class="navbar">
                <div class="container">
                    <a href="/" class="navbar-brand logo">
                        <img t-att-src="'/logo.png?company=%s' % res_company.id" t-att-alt="'Logo of %s' % res_company.name"
                             t-att-title="res_company.name"/>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#top_menu_collapse">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars fa-w-14"
                             role="img"
                             xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                            <path fill="currentColor"
                                  d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path>
                        </svg>
                    </button>
                    <div class="d-flex ml-auto" id="social-media">
                        <a t-if="website.social_facebook" t-att-href="website.social_facebook" class="btn btn-sm btn-link text-beta">
                            <i class="fa fa-2x fa-facebook-square"/>
                        </a>
                        <a t-if="website.social_twitter" t-att-href="website.social_twitter" class="btn btn-sm btn-link text-beta">
                            <i class="fa fa-2x fa-twitter"/>
                        </a>
                        <a t-if="website.social_linkedin" t-att-href="website.social_linkedin" class="btn btn-sm btn-link text-beta">
                            <i class="fa fa-2x fa-linkedin"/>
                        </a>
                        <a t-if="website.social_youtube" t-att-href="website.social_youtube" class="btn btn-sm btn-link text-beta">
                            <i class="fa fa-2x fa-youtube-play"/>
                        </a>
                        <a t-if="website.social_github" t-att-href="website.social_github" class="btn btn-sm btn-link text-beta">
                            <i class="fa fa-2x fa-github"/>
                        </a>
                        <a t-if="website.social_instagram" t-att-href="website.social_instagram" class="btn btn-sm btn-link text-beta">
                            <i class="fa fa-2x fa-instagram"/>
                        </a>
                    </div>
                    <span groups="base.group_public" class="nav-item">
                        <a t-attf-href="/web/login" class="nav-link text-beta">
                            <b>Se connecter</b>
                        </a>
                    </span>
                    <div class="dropdown" t-ignore="true" t-if="not user_id._is_public()">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                            <b>
                                <span t-esc="user_id.name[:23] + '...' if user_id.name and len(user_id.name) &gt; 25 else user_id.name"/>
                            </b>
                        </a>
                        <div class="dropdown-menu js_usermenu" role="menu">
                            <a id="o_logout" class="dropdown-item" t-attf-href="/web/session/logout?redirect=/" role="menuitem">Logout</a>
                        </div>
                    </div>

                </div>
            </nav>
            <nav class="navbar navbar-expand-md navbar-light bg-light">
                <div class="container">
                    <!--<a href="/" class="navbar-brand logo">
                      <img t-att-src="'/logo.png?company=%s' % res_company.id" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
                  </a>
                  <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#top_menu_collapse">
                      <span class="navbar-toggler-icon"/>
                  </button> -->
                    <div class="collapse navbar-collapse" id="top_menu_collapse">
                        <!-- FIXME We want menu to open to the right by default (except cases handled in JS) -->
                        <a href="/" class="nav-link">
                            <span class="fa fa-home fa-2x"></span>
                        </a>
                        <ul class="nav navbar-nav ml-auto text-left" id="top_menu">
                            <li class="nav-item divider o_hidden" t-ignore="true" t-if="not user_id._is_public()"/>
                            <li class="nav-item dropdown o_hidden" t-ignore="true" t-if="not user_id._is_public()">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                                    <b>
                                        <span t-esc="user_id.name[:23] + '...' if user_id.name and len(user_id.name) &gt; 25 else user_id.name"/>
                                    </b>
                                </a>
                                <div class="dropdown-menu js_usermenu" role="menu">
                                    <a id="o_logout" class="dropdown-item" t-attf-href="/web/session/logout?redirect=/" role="menuitem">
                                        Logout
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </xpath>
        <xpath expr="//div[@id='wrapwrap']/main/t[@t-raw='0']" position="before">
            <div t-if="o_portal_fullwidth_alert"
                 class="alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden">
                <div class="container">
                    <t t-raw="o_portal_fullwidth_alert"/>
                </div>
            </div>
        </xpath>
    </template>

    <template id="portal.portal_show_sign_in" inherit_id="portal.frontend_layout" name="Show Sign In">
        <xpath expr="//div[@id='social-media']" position="after">
            <span groups="base.group_public" class="nav-item">
                <a t-attf-href="/web/login" class="nav-link text-beta">
                    <b>Sign in</b>
                </a>
            </span>
        </xpath>
    </template>
    <template id="payment_website_sale" inherit_id="website_sale.payment" name="payment reconfirm">
        <xpath expr="//*[hasclass('oe_structure')][@id='oe_structure_website_sale_payment_1']" position="replace">
        </xpath>
    </template>
</odoo>